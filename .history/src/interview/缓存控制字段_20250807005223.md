---
title: 缓存控制字段
icon: object-group
tag:
  - 面试必考
---


缓存字段分类速查表
⚡ 强缓存控制字段（无需服务器验证）
响应头字段	示例值	说明
```
Expires	Wed, 21 Oct 2025 07:28:00 GMT	HTTP/1.0 的绝对过期时间
Cache-Control	max-age=31536000	缓存有效期（秒），优先级高于 Expires
	public	允许代理服务器缓存
	immutable	资源永不变（内容哈希命名时使用）
识别特征：当这些字段有效时，浏览器不发送请求，直接从缓存加载资源（状态码 200 from cache）
````
🔁 协商缓存控制字段（需要服务器验证）
请求头字段	响应头字段	示例值	说明
```
If-Modified-Since	Last-Modified	Tue, 15 Aug 2023 12:00:00 GMT	基于修改时间的验证
If-None-Match	ETag	"d3b07384d113edec49eaa6238ad5ff00"	基于内容哈希的验证
识别特征：浏览器会发送请求，服务器返回 304 或 200（状态码 304 Not Modified）
```
完整缓存交互流程

# 首次请求（服务端响应）

```
HTTP/1.1 200 OK
Cache-Control: max-age=3600, public   # ← 强缓存指令 (1小时有效)
ETag: "xyz123"                        # ← 协商缓存标识
Last-Modified: Tue, 15 Aug 2023 12:00:00 GMT  # ← 协商缓存标识
```

# 1小时内再次请求 → 强缓存生效（无网络请求）
[浏览器直接从缓存加载]

# 1小时后再次请求 → 发送验证请求
```
GET /resource.jpg HTTP/1.1
If-None-Match: "xyz123"               # ← 携带上次的ETag
If-Modified-Since: Tue, 15 Aug 2023 12:00:00 GMT # ← 携带上次修改时间
``
# 服务端验证后响应
```
HTTP/1.1 304 Not Modified             # ← 协商缓存生效
（空响应体）
```
开发者调试指南
1. Chrome DevTools 查看
● Network 面板：
  ○ 强缓存：Size 列显示 (from disk cache) 或 (from memory cache)
  ○ 协商缓存：Status 列显示 304
● Headers 标签页：
Response Headers:
+ Cache-Control: max-age=3600    # 强缓存字段
+ ETag: "xyz123"                 # 协商缓存字段
+ Expires: ...                   # 强缓存字段

Request Headers:
+ If-None-Match: "xyz123"        # 协商缓存请求字段
+ If-Modified-Since: ...         # 协商缓存请求字段
2. 命令行工具验证
# 查看所有缓存相关头
```
curl -I https://example.com/static/logo.png

# 仅查看缓存控制头
curl -I https://example.com/static/logo.png | grep -E "Cache-Control|ETag|Expires|Last-Modified"
3. 优先级规则
1. Cache-Control > Expires（强缓存）
2. ETag > Last-Modified（协商缓存）
3. no-store > no-cache > 其他缓存指令
黄金法则：
看到 max-age/Expires → 这是强缓存
看到 ETag/Last-Modified → 这是协商缓存
两者常配合使用实现分级缓存策略